$hold-increment: 2000ms;
$scroll-increment: 100ms;
$iteration-increment: $hold-increment + $scroll-increment;
$green-text: #2d6878;
$grey-text: #1b1b1b;

@mixin rotation ($animation, $increment, $delay, $opacity: 0, $position: absolute) {
    animation: $animation $increment linear;
    -webkit-animation: $animation $increment linear;
    animation-delay: $delay;
    -webkit-animation-delay: $delay;
    opacity: $opacity;
    overflow: hidden;
    position: $position;
}

@mixin rotation-delay ($delay) {
    animation-delay: $delay;
    -webkit-animation-delay: $delay;
}

@mixin rotation-exit ($animation, $increment, $opacity: 0) {
    animation: fade-out-phrase-part $increment;
    -webkit-animation: fade-out-phrase-part $increment;
    overflow: hidden;
    opacity: $opacity;
}

.hero__headline {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    @media (max-width: $medium-screen) {
        margin: 0;
    }

    .landing-phrase {
        margin: 0;
        font-weight: bold;
        display: none;
        color: $grey-text;
        text-align: center;
        span {
            line-height: rem(70);
            @media (max-width: $medium-screen) {
                line-height: rem(50);
            }
        }
        @media (max-width: $medium-screen) {
            text-align: left;
            font-size: rem(40);
            flex-basis: rem(641);
            padding-bottom: rem(20);
        }
    }

    .landing-phrase--entrance-animation {
        display: flex;
        span {
            @include rotation('fade-in-landing-phrase', $hold-increment/2, 0, 1, 'static');
        }
    }

    .phrase {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        font-size: rem(56);
        font-weight: bold;
        text-align: center;
        color: $green-text;
        span {
            display: block;
            line-height: rem(70);
            @media (max-width: $medium-screen) {
                line-height: rem(50);
                text-align: left;
            }
        }
        @media (max-width: $medium-screen) {
            flex-basis: rem(641);
            justify-content: normal;
            font-size: rem(40);
        }

        .phrase__intro {
            width: rem(262);
            height: rem(50);
            flex-shrink: 0;
            white-space: nowrap;
            @media (max-width: $medium-screen) {
                text-align: left;
                left: 0;
            }

            .phrase__intro__item {
                position: relative;

                span {
                    position: absolute;
                    color: $green-text;
                    right: 0;
                    @media (max-width: $medium-screen) {
                        left: 0;
                    }
                }

                @media (max-width: $medium-screen) {
                    left: 0;
                }
            }

            .phrase__intro__item--entrance span {
                @include rotation('scroll-out', $iteration-increment, 0);
            }

            .phrase__intro__item--rotation span {
                @include rotation('scroll-in', $iteration-increment * 2, $iteration-increment);
            }

            .phrase__intro__item--rotation span:nth-child(2) {
                @include rotation-delay($iteration-increment * 3);
            }

            .phrase__intro__item--rotation span:nth-child(3) {
                @include rotation-delay($iteration-increment * 5);
            }

            .phrase__intro__item--rotation span:nth-child(4) {
                @include rotation-delay($iteration-increment * 7);
            }
        }

        .phrase__static__item {
            span {
                color: $grey-text;
            }
        }

        .phrase__end {
            width: rem(385);
            flex-shrink: 0;
            white-space: nowrap;
            flex-wrap: wrap;
            padding-bottom: rem(80);
            @media (max-width: $medium-screen) {
                display: flex;
                width: 100%;
            }
        }

        .phrase__end__item {
            position: absolute;
            color: $green-text;
            white-space: nowrap;
        }

        .phrase__end-rotation span {
            position: absolute;
            opacity: 0;
            overflow: hidden;
            position: absolute;
            white-space: nowrap;
        }

        .phrase__end__item--entrance span {
            @include rotation('scroll-out', $iteration-increment * 2,  0);
        }

        .phrase__end__item--rotate span {
            @include rotation('scroll-in', $iteration-increment * 2, 0);
        }

        .phrase__end__item--rotate span:nth-child(2) {
            @include rotation-delay($iteration-increment * 2);
        }

        .phrase__end__item--rotate span:nth-child(3) {
            @include rotation-delay($iteration-increment * 4);
        }

        .phrase__end__item--rotate span:nth-child(4) {
            @include rotation-delay($iteration-increment * 6);
        }

        .phrase--exit-animation {
            @include rotation-exit('fade-out-phrase-part', $hold-increment * 3 + $scroll-increment, 0);
        }

        @keyframes fade-in-landing-phrase {
            0% { opacity: 0; vibility: hidden; }
            40% { opacity: 0; vibility: hidden; }
            90% { opacity: 1; vibility: visible; }
            100% { opacity: 1; vibility: visible; }
        }

        @keyframes fade-out-phrase-part {
            0% { opacity: 1 }
            95% { opacity: 1 }
            100% { opacity: 0 }

        }

        @keyframes scroll-out {
            0% { opacity: 1; }
            95% { opacity: 1; }
            100% { opacity: 0; }
        }

        @-moz-keyframes scroll-in {
            0% { opacity: 1; -moz-transform: translateY(25px); }
            5% { opacity: 1; -moz-transform: translateY(0px); }
            95% { opacity: 1; }
            100% { opacity: 0;  }
        }

        @-webkit-keyframes scroll-in {
            0% { opacity: 1; -webkit-transform: translateY(25px); }
            5% { opacity: 1; -webkit-transform: translateY(0px); }
            95% { opacity: 1; }
            100% { opacity: 0; }
        }
    }
}
